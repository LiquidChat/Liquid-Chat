<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<link rel="Icon" href="./img/New Project (21).png">
<title>Liquid Chat</title>
<style>
  body { font-family: Arial; background: #272727; display: flex; justify-content: center; padding: 50px; color: #fff; }
  #chat { width: 600px; background: #1c1c1c; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.3); }
  #messages { height: 700px; overflow-y: auto; padding: 10px; margin-bottom: 10px; display: flex; flex-direction: column; }
  .message { margin: 5px 0; padding: 8px 12px; border-radius: 12px; max-width: 70%; word-wrap: break-word; }
  .user { background: #818181; color: #fff; align-self: flex-end; }
  .bot { background: #1c1c1c; color: #fff; align-self: flex-start; }
  #inputWrapper { display: flex; }
  input { flex: 1; padding: 10px; border-radius: 8px; border: none; margin-right: 5px; }
  button { font-size: 22px; font-weight: bold; width: 50px; border: none; border-radius: 30px; background: #fff; color: #000; cursor: pointer; }
  button:hover { transition: 0.3s; background: #a0a0a0; }
</style>
</head>
<body>
<div id="chat">
  <div id="messages"></div>
  <div id="inputWrapper">
    <input type="text" id="question" placeholder="–ö–∞–∫ –º–æ–≥—É –ø–æ–º–æ—á—å?" onkeydown="if(event.key==='Enter'){ask()}">
    <button onclick="ask()">‚¨Ü</button>
  </div>
</div>

<script>
const responses = {
  "–ö—Ç–æ —Ç–∞–∫–æ–π –í–∞–¥–∏–º?": ["–ü–∏–¥–æ—Ä –≤—Å–µ–º —Å–æ—Å—É—â–∏–π!üòÄ, –ø–∏–∑–¥–∏—Ç –º–∞—Ç—å –∫–ª—é—à–∫–æ–π, +1 —Ö—Ä–æ–º–æ—Å–æ–º–∞ - 2 –æ—Ç—Ü–∞, 42 –±—Ä–∞—Ç—É—Ö–∞ 42üòé", "–í–∞–¥–∏–º - –Ω–µ –ø—Ä–æ—Å—Ç–æ –±–µ–∑ –º–∞–º–Ω–æ–µ —Å—É—â–µ—Å—Ç–≤–æ –∞ –∏ —Ç—Ä–µ—Ö –æ—Ç—Ü–æ–≤–æ–µ –ø–æ–≥—Ä–µ–±–∏—â–µüòÇ, –≤ –≤–∞–≥–∏–Ω—É –µ–≥–æ –º–∞—Ç–µ—Ä–∏ –≤—å–µ–∂–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–∑–æ–≤–∏–∫–æ–≤, –ø—Ä—è–º –∫–∞–∫ –≤ —Ç–∞–º–æ–∂–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ, 42 42 42.üòé"],
  "–ø—Ä–∏–≤–µ—Ç": ["–ü—Ä–∏–≤–µ—Ç!", "–•–∞–π!","–ö—É! üòé"],
  "—Å–∞–ª–∞–º": ["–•–∞–π!", "–ó–¥–æ—Ä–æ–≤–æ!","–ö—É! üòé"],
  "–∑–¥—Ä–∞—Å—Ç–≤—É–π": ["–ü—Ä–∏–≤–µ—Ç!", "–•–∞–π!","–ö—É! üòé"],
  "–¥–æ–±—Ä—ã–π –¥–µ–Ω—å": ["–ü—Ä–∏–≤–µ—Ç!", "–•–∞–π!"],
  "–∫–∞–∫ –¥–µ–ª–∞": ["–û—Ç–ª–∏—á–Ω–æ! –∞ —É —Ç–µ–±—è?", "–ù–µ–ø–ª–æ—Ö–æ, –∞ —É —Ç–µ–±—è?", "–í—Å–µ —Å—É–ø–µ—Ä! –∞ —É —Ç–µ–±—è?"],
  "—á—Ç–æ –¥–µ–ª–∞–µ—à—å": ["–û—Ç–≤–µ—á–∞—é –Ω–∞ —Ç–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã!", "–ú–µ—á—Ç–∞—é –æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –º–∏—Ä–µ!"],
  "–ø–æ–º–æ–≥–∏ —Å –∫–æ–¥–æ–º": ["–ò–∑–≤–∏–Ω–∏üôÅ, —è –ø–æ–∫–∞ –Ω–µ —É–º–µ—é –∫–æ–¥–∏—Ç—å, –º–æ–≥—É –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞—Ç—å –ê–ò üòÉ‚§µ<br><br><hr><br><b>Chat GPT</b><br><br> <b>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:</b> –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞, –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤, –ø–æ–º–æ—â—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π.<br><br><b>–ü–ª—é—Å—ã –≤ –∫–æ–¥–∏–Ω–≥–µ:</b><br><br>‚ó¶ –ú–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å —Å—Ä–∞–∑—É –≥–æ—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö.<br><br>‚ó¶ –û–±—ä—è—Å–Ω—è–µ—Ç –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã —á—É–∂–æ–≥–æ –∫–æ–¥–∞.<br><br>‚ó¶ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç—ã –∏–ª–∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π.<br><br><hr><br><b>DeepSeek</b><br><br> –ß—Ç–æ –¥–µ–ª–∞–µ—Ç: –≥–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º, —Ñ–æ—Ä—É–º–∞–º, StackOverflow.<br><br><b>–ü–ª—é—Å—ã –≤ –∫–æ–¥–∏–Ω–≥–µ:</b><br><br>‚ó¶ –ë—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ API.<br><br>‚ó¶ –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å —Ä–µ–¥–∫–∏–µ –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –º–µ—Ç–æ–¥—ã.<br><br>‚ó¶ –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –±–∞–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–¥–∫–æ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è.<br><br><hr><br><b>SuperNinja</b><br><br>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:</> –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞, —Å–æ–≤–µ—Ç—ã –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.<br><br><b>–ü–ª—é—Å—ã –≤ –∫–æ–¥–∏–Ω–≥–µ:</b><br><br>‚ó¶ –£–º–µ–Ω—å—à–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞.<br><br>‚ó¶ –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.<br><br>‚ó¶ –ü–æ–º–æ–≥–∞–µ—Ç –ø–∏—Å–∞—Ç—å ‚Äú—á–∏—Å—Ç—ã–π –∫–æ–¥‚Äù, —á—Ç–æ–±—ã –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º.<br><br><hr><br><b>–ò—Ç–æ–≥:</b><br><br><b>Chat GPT</b> ‚Äî –ø–∏—à–µ—Ç –∫–æ–¥, –æ–±—ä—è—Å–Ω—è–µ—Ç.<br><br><b>DeepSeek</b> ‚Äî –∏—â–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≥–ª—É–±–∂–µ –∏ —Ç–æ—á–Ω–µ–µ.<br><br><b>SuperNinja</b> ‚Äî –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –ª—É—á—à–µ, –±—ã—Å—Ç—Ä–µ–µ, —á–∏—â–µ."],
  "–Ω–∞–ø–∏—à–∏ –∫–æ–¥": ["–ò–∑–≤–∏–Ω–∏üôÅ, —è –ø–æ–∫–∞ –Ω–µ —É–º–µ—é –∫–æ–¥–∏—Ç—å, –º–æ–≥—É –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞—Ç—å –ê–ò üòÉ‚§µ<br><br><hr><br><b>Chat GPT</b><br><br> <b>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:</b> –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞, –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤, –ø–æ–º–æ—â—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π.<br><br><b>–ü–ª—é—Å—ã –≤ –∫–æ–¥–∏–Ω–≥–µ:</b><br><br>‚ó¶ –ú–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å —Å—Ä–∞–∑—É –≥–æ—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö.<br><br>‚ó¶ –û–±—ä—è—Å–Ω—è–µ—Ç –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã —á—É–∂–æ–≥–æ –∫–æ–¥–∞.<br><br>‚ó¶ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç—ã –∏–ª–∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π.<br><br><hr><br><b>DeepSeek</b><br><br> –ß—Ç–æ –¥–µ–ª–∞–µ—Ç: –≥–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º, —Ñ–æ—Ä—É–º–∞–º, StackOverflow.<br><br><b>–ü–ª—é—Å—ã –≤ –∫–æ–¥–∏–Ω–≥–µ:</b><br><br>‚ó¶ –ë—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ API.<br><br>‚ó¶ –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å —Ä–µ–¥–∫–∏–µ –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –º–µ—Ç–æ–¥—ã.<br><br>‚ó¶ –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –±–∞–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–¥–∫–æ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è.<br><br><hr><br><b>SuperNinja</b><br><br>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:</> –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞, —Å–æ–≤–µ—Ç—ã –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.<br><br><b>–ü–ª—é—Å—ã –≤ –∫–æ–¥–∏–Ω–≥–µ:</b><br><br>‚ó¶ –£–º–µ–Ω—å—à–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞.<br><br>‚ó¶ –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.<br><br>‚ó¶ –ü–æ–º–æ–≥–∞–µ—Ç –ø–∏—Å–∞—Ç—å ‚Äú—á–∏—Å—Ç—ã–π –∫–æ–¥‚Äù, —á—Ç–æ–±—ã –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º.<br><br><hr><br><b>–ò—Ç–æ–≥:</b><br><br><b>Chat GPT</b> ‚Äî –ø–∏—à–µ—Ç –∫–æ–¥, –æ–±—ä—è—Å–Ω—è–µ—Ç.<br><br><b>DeepSeek</b> ‚Äî –∏—â–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≥–ª—É–±–∂–µ –∏ —Ç–æ—á–Ω–µ–µ.<br><br><b>SuperNinja</b> ‚Äî –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –ª—É—á—à–µ, –±—ã—Å—Ç—Ä–µ–µ, —á–∏—â–µ."],
  "–∫—É": ["–ö—É! üòé", "–ü—Ä–∏–≤–µ—Ç!"],
  "–æ—Ç–ª–∏—á–Ω–æ": ["–†–∞–¥ —Å–ª—ã—à–∞—Ç—å! üòÉ –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ?", "–≠—Ç–æ –æ—Ç–ª–∏—á–Ω–æ! üòÉ –° —á–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"]
};

let firstMessage = true;

function levenshtein(a, b) {
  const matrix = [];
  for(let i=0; i<=b.length; i++){ matrix[i] = [i]; }
  for(let j=0; j<=a.length; j++){ matrix[0][j] = j; }
  for(let i=1; i<=b.length; i++){
    for(let j=1; j<=a.length; j++){
      if(b.charAt(i-1) === a.charAt(j-1)){
        matrix[i][j] = matrix[i-1][j-1];
      } else {
        matrix[i][j] = Math.min(matrix[i-1][j-1]+1, matrix[i][j-1]+1, matrix[i-1][j]+1);
      }
    }
  }
  return matrix[b.length][a.length];
}

function isSimilar(input, key) {
  return levenshtein(input, key) <= 2;
}

// –†–µ—à–µ–Ω–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
// –†–µ—à–µ–Ω–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
function solveMath(input) {
  let cleanInput = input
    .toLowerCase()
    .replace(/–ø–æ–º–æ–≥–∏|—Å–∫–æ–ª—å–∫–æ|\?/g,'')
    .replace(/\s+/g,'');

  // --- –ó–∞–º–µ–Ω–∞ —Å—Ç–µ–ø–µ–Ω–µ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ x¬≤ ‚Üí x^2 ---
  const superscripts = { "¬≤": "2", "¬≥": "3", "‚Å¥": "4", "‚Åµ": "5", "‚Å∂": "6", "‚Å∑": "7", "‚Å∏": "8", "‚Åπ": "9" };
  cleanInput = cleanInput.replace(/([a-z])([\u00B2-\u00B9])/g, (m, v, s) => v + "^" + superscripts[s]);

  // --- –£—Ä–∞–≤–Ω–µ–Ω–∏—è —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ---
  if (cleanInput.includes("=")) {
    let [left, right] = cleanInput.split("=");
    if (!right) return null;

    let match = cleanInput.match(/[a-z]/i);
    if (match) {
      let variable = match[0];
      let equation = `(${left})-(${right})`;

      try {
        let f0 = eval(equation.replace(new RegExp(variable,"g"),"(0)"));
        let f1 = eval(equation.replace(new RegExp(variable,"g"),"(1)"));

        let coeff = f1 - f0; 
        let constTerm = f0;  

        if (coeff === 0) {
          return constTerm === 0 
            ? "–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ –º–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏–π"
            : "–†–µ—à–µ–Ω–∏–π –Ω–µ—Ç";
        }

        let solution = -constTerm / coeff;

        // –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ
        let steps = [];
        steps.push(`${left}=${right}`);
        if (coeff === 1) {
          steps.push(`${variable} = ${right}+${-constTerm}`);
          steps.push(`${variable} = ${solution}`);
        } else {
          steps.push(`${coeff}${variable} = ${-constTerm}`);
          steps.push(`${variable} = ${-constTerm}/${coeff}`);
          steps.push(`${variable} = ${solution}`);
        }
        return steps.join("<br>");
      } catch(e){}
    }
  }

  // --- –£–ø—Ä–æ—â–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–π ---
  if (/^[0-9a-z+\-*/^().]+$/.test(cleanInput)) {
    try {
      // 1) –£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–æ–¥–æ–±–Ω–æ–≥–æ –≤–∏–¥–∞: 2x+3x-5x
      if (/([0-9]*[a-z])/.test(cleanInput) && !/\*/.test(cleanInput)) {
        let variable = cleanInput.match(/[a-z]/)[0];
        let terms = cleanInput.split(/(?=[+-])/).map(t => {
          if (t.includes(variable)) {
            let num = t.replace(variable,"");
            if (num === "" || num === "+") num = 1;
            if (num === "-") num = -1;
            return parseInt(num);
          }
          return NaN;
        }).filter(x => !isNaN(x));

        let sum = terms.reduce((a,b)=>a+b,0);
        return `${cleanInput} = ${sum}${variable}`;
      }

      // 2) –£–º–Ω–æ–∂–µ–Ω–∏–µ —Å—Ç–µ–ø–µ–Ω–µ–π —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º: x^2*x^3
      if (/^([a-z])\^(\d+)\*\1\^(\d+)$/.test(cleanInput)) {
        let [, variable, pow1, pow2] = cleanInput.match(/^([a-z])\^(\d+)\*\1\^(\d+)$/);
        return `${cleanInput} = ${variable}^${parseInt(pow1)+parseInt(pow2)}`;
      }

      // 3) –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π: 5x+5x
      if (/^\d+[a-z]\+\d+[a-z]$/.test(cleanInput)) {
        let num1 = parseInt(cleanInput.match(/^(\d+)/)[0]);
        let num2 = parseInt(cleanInput.match(/\+(\d+)/)[1]);
        let variable = cleanInput.match(/[a-z]/)[0];
        return `${cleanInput} = ${(num1+num2)}${variable}`;
      }

      // 4) –°–ª—É—á–∞–π x^5*x^5
      if (/^([a-z])\^(\d+)\*\1\^\2$/.test(cleanInput)) {
        let [, variable, pow] = cleanInput.match(/^([a-z])\^(\d+)\*\1\^\2$/);
        return `${cleanInput} = ${variable}^${parseInt(pow)*2}`;
      }

      // 5) –û–±—ã—á–Ω—ã–µ —á–∏—Å–ª–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã
      const result = eval(cleanInput.replace(/\^/g,"**"));
      if (!isNaN(result)) return cleanInput + " = " + result;
    } catch(e){}
  }

  return null;
}







function ask() {
  const input = document.getElementById("question");
  const msg = input.value.trim();
  if(!msg) return;

  const messages = document.getElementById("messages");

  // –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const userMessage = document.createElement("div");
  userMessage.className = "message user";
  userMessage.textContent = input.value;
  messages.appendChild(userMessage);

  let replies = [];
  let handled = false;

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞
  const mathReply = solveMath(msg);
  if(mathReply){
    replies.push(mathReply);
    handled = true;
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—ã—á–Ω—ã—Ö —Ñ—Ä–∞–∑
  if(!handled){
    let matchedKey = null;
    let reply = "–ò–∑–≤–∏–Ω–∏, —è –Ω–µ –ø–æ–Ω—è–ª üòÖ";
    const msgLower = msg.toLowerCase();
    for(let key in responses){
      if(msgLower.includes(key) || isSimilar(msgLower,key)){
        const options = responses[key];
        reply = options[Math.floor(Math.random() * options.length)];
        matchedKey = key;
        break;
      }
    }

    // –ü–µ—Ä–≤—ã–π –ø—Ä–∏–≤–µ—Ç, –µ—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
// –ü–µ—Ä–≤—ã–π –ø—Ä–∏–≤–µ—Ç, –µ—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
if(firstMessage){
  const greetings = ["–ø—Ä–∏–≤–µ—Ç", "–∫—É", "—Å–∞–ª–∞–º", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π", "–∑–¥—Ä–∞—Å—Ç–≤—É–π", "–¥–æ–±—Ä—ã–π –¥–µ–Ω—å"];
  const msgLower = msg.toLowerCase();

  let isGreeting = greetings.some(g => msgLower.includes(g));

  if(!isGreeting){
    replies.unshift(Math.random() < 0.5 ? "–ü—Ä–∏–≤–µ—Ç!" : "–ö—É! üòé");
  }
}


    replies.push(reply);
  }

  firstMessage = false;
  input.value = "";

  // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏
  function typeMessage(text, callback) {
    const botMessage = document.createElement("div");
    botMessage.className = "message bot";
    messages.appendChild(botMessage);

    let dots = 0;
    const typingIndicator = setInterval(()=>{
      botMessage.textContent = "" + ".".repeat(dots%4);
      dots++;
      messages.scrollTop = messages.scrollHeight;
    },100);

    setTimeout(()=>{
      clearInterval(typingIndicator);
      let i=0;
      const interval = setInterval(()=>{
        botMessage.innerHTML = text.slice(0,i+1);
        i++;
        messages.scrollTop = messages.scrollHeight;
        if(i===text.length) clearInterval(interval);
        if(i===text.length && callback) callback();
      },17);
    },1000);
  }

  function sendReplies(index=0){
    if(index<replies.length){
      typeMessage(replies[index], ()=>sendReplies(index+1));
    }
  }

  sendReplies();
}
</script>
</body>
</html>
